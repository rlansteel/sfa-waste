<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Residuos - {{municipality_name}}</title> <style>
        body { font-family: sans-serif; line-height: 1.6; margin: 2em; color: #333; background-color: #f8f9fa; }
        .container { max-width: 900px; margin: auto; background-color: #ffffff; padding: 2em; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1, h2 { color: #1a237e; /* Azul oscuro */ }
        h1 { border-bottom: 2px solid #c5cae9; padding-bottom: 0.3em; text-align: center; }
        h2 { margin-top: 1.5em; border-bottom: 1px solid #e8eaf6; padding-bottom: 0.2em;}
        .data-section { background-color: #e8eaf6; /* Azul muy claro */ border: 1px solid #c5cae9; padding: 1.5em; margin-bottom: 1.5em; border-radius: 8px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1em; }
        .data-item { background-color: #ffffff; padding: 0.8em; border-radius: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .data-label { font-weight: bold; color: #303f9f; /* Azul medio */ display: block; margin-bottom: 0.3em; }
        .data-value { color: #333; }
        .llm-analysis { margin-top: 2em; padding: 1.5em; border: 1px dashed #9fa8da; border-radius: 8px; background-color: #f1f3f5; }
        .llm-analysis h2 { border-bottom: none; margin-bottom: 1em;}
        .llm-analysis ul { list-style-type: disc; margin-left: 20px; padding-left: 1em; }
        .llm-analysis li { margin-bottom: 0.6em; }
        .llm-analysis p { margin-bottom: 0.8em; }
        .footer { margin-top: 2.5em; font-size: 0.85em; color: #555; text-align: center; border-top: 1px solid #eee; padding-top: 1em;}
        /* Estilo para N/A */
        .na-value { color: #888; font-style: italic; }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            body { margin: 1em; }
            .container { padding: 1em; }
            .data-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Reporte de Gestión de Residuos: {{municipality_name}}</h1>

    <div class="data-section">
        <h2>Información Base (Datos CSV)</h2>
        <div class="data-item"><span class="data-label">Municipio:</span> <span class="data-value">{{municipality_name}}</span></div>
        <div class="data-item"><span class="data-label">País:</span> <span class="data-value">{{country_name}}</span></div>
        <div class="data-item"><span class="data-label">Población:</span> <span class="data-value">{{population}}</span></div>
        <div class="data-item"><span class="data-label">Residuos Totales (Toneladas/Año):</span> <span class="data-value">{{total_waste_tons_year}}</span></div>
        <div class="data-item"><span class="data-label">Nivel de Ingresos:</span> <span class="data-value">{{income_level}}</span></div>
        <div class="data-item"><span class="data-label">Tasa de Reciclaje (%):</span> <span class="data-value">{{recycling_rate_percent}}</span></div>
        <div class="data-item"><span class="data-label">Cobertura Colección (Población %):</span> <span class="data-value">{{collection_coverage_population_percent}}</span></div>
        <div class="data-item"><span class="data-label">Modo Colección Primario:</span> <span class="data-value">{{primary_collection_mode}}</span></div>
        </div>
        <h2>Waste Composition (%)</h2>
<table>
  <thead>
    <tr><th>Waste Type</th><th>Percentage</th></tr>
  </thead>
  <tbody>
    <tr><td>Food/Organic</td><td>{{composition_food_organic}}</td></tr>
    <tr><td>Glass</td><td>{{composition_glass}}</td></tr>
    <tr><td>Metal</td><td>{{composition_metal}}</td></tr>
    <tr><td>Paper/Cardboard</td><td>{{composition_paper_cardboard}}</td></tr>
    <tr><td>Plastic</td><td>{{composition_plastic}}</td></tr>
    <tr><td>Other</td><td>{{composition_other}}</td></tr>
    </tbody>
</table>

    <div class="llm-analysis">
        <h2>Análisis y Hallazgos Web (Resumen LLM)</h2>
        {{llm_analysis_section}}
    </div>

    <div class="footer">
        <p><em>Reporte generado automáticamente el: {{generation_date}}</em></p>
        <p><em>Fuentes de datos: CSV procesado, Búsquedas web vía Tavily API, Análisis por LLM ({{llm_model_name}}).</em></p> </div>
</div>
</body>
</html>
